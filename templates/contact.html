{# nourrir_flask/templates/contact.html #}
{% extends "base.html" %}

{% block title %}Contact – NourrIR{% endblock %}

{% block extra_head %}
<style>
  .contact-form label { display:block; margin:0.6em 0 0.2em; font-weight:600; }
  .contact-form input,
  .contact-form textarea { width:100%; padding:0.6em 0.8em; border:1px solid #ccc; border-radius:0.6em; }
  .contact-form button { margin-top:1em; background:var(--dopamine-purple); color:#fff; border:none; padding:0.8em 1.4em; border-radius:0.8em; font-size:1em; cursor:pointer; }
  #contact-response { margin-top:1.2em; font-weight:600; }
</style>
{% endblock %}

{% block content %}
<h1>Contactez l’équipe RH</h1>

<form id="contact-form" class="contact-form">
  <label>Nom
    <input type="text" name="name" placeholder="Votre nom (facultatif)">
  </label>
  <label>Email
    <input type="email" name="email" placeholder="Votre email (facultatif)">
  </label>
  <label>Sujet
    <input type="text" name="subject" placeholder="Sujet (facultatif)">
  </label>
  <label>Message
    <textarea name="message" rows="6" placeholder="Votre message…"></textarea>
  </label>
  <button type="submit">Envoyer</button>
</form>

<div id="contact-response"></div>

<script>
document.getElementById('contact-form').addEventListener('submit', async (e) => {
  e.preventDefault();
  const form = e.target;
  const data = Object.fromEntries(new FormData(form).entries());

  try {
    const res = await fetch('{{ url_for('submit_contact') }}', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });
    const json = await res.json();
    document.getElementById('contact-response').textContent = json.message || 'Merci! Votre message a été envoyé.';
    form.reset();
  } catch (err) {
    document.getElementById('contact-response').textContent = "Oups, une erreur s’est produite. Veuillez réessayer plus tard.";
  }
});
</script>
{% endblock %}
