{# nourrir_flask/templates/politique.html #}
{% extends "base.html" %}

{% block title %}Politique d’intégration – NourrIR{% endblock %}

{% block content %}

<!-- YouTube video embed -->
<div class="video-container" style="margin-bottom: 1.5em; text-align: center;">
  <iframe
    width="560" height="315"
    src="https://www.youtube.com/embed/8c5-p9Ag6Qg"
    title="Vidéo de la politique d'intégration"
    frameborder="0"
    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
    allowfullscreen>
  </iframe>
</div>

<!-- Downloadable PDF link -->
<p style="margin-bottom:2em; text-align: center;">
  <a href="{{ url_for('static', filename='assets/pdf/politique.pdf') }}" download style="font-size:1.1em;">
    📄 Télécharger la politique d’intégration (PDF)
  </a>
</p>

<h1>Politique d’intégration des nouveaux employés</h1>

<h2>0. Objectif et portée</h2>
<p>
Cette politique définit le processus structuré d’accueil (<em>onboarding</em>) appliqué par NourrIR afin de :
<ul>
    <li>garantir une intégration rapide, inclusive et motivante ;</li>
    <li>transmettre les valeurs d’<strong>accessibilité, inclusion, pluridisciplinarité, autonomie, joie et créativité</strong> ;</li>
    <li>assurer la conformité légale et la sécurité des données (RGPD, Loi 25, <a href="https://www.hhs.gov/hipaa/" target="_blank">HIPAA‑équivalent</a> lorsque pertinent) ;</li>
    <li>optimiser la rétention des talents et la montée en compétences dans les 12 premiers mois.</li>
</ul>
La politique s’applique à <strong>tous les nouveaux employés, stagiaires et consultants</strong> de NourrIR, qu’ils travaillent sur site, en télétravail ou en mode hybride.
</p>

<h2>1. Pré‑onboarding : de l’acceptation de l’offre au Jour 0</h2>
<ul>
    <li>Envoi du <strong>courriel de bienvenue</strong> personnalisé dans les 24 h suivant la signature.</li>
    <li>Signature électronique du contrat & formulaires (contrat, NDA, politique données).</li>
    <li>Checklist IT : création compte Microsoft 365, accès GitHub, SIRH BambooHR, VPN.</li>
    <li>Livraison du <strong>Welcome Kit créatif</strong> (carnet de croquis, crayons NourrIR, livre “Brain Food”).</li>
    <li>Alignement culturel : vidéo de présentation « On croque la dopamine » (CEO), assignation d’un <strong>Buddy pluridisciplinaire</strong>.</li>
</ul>

<h2>2. Jour 1 : accueil officiel et orientation</h2>
<ul>
    <li><b>09 h 00 :</b> Petit‑déj « Brain‑Boost » (smoothies oméga‑3, playlist lo‑fi)</li>
    <li><b>09 h 30 :</b> Session « Culture & Valeurs » (présentation + quizz)</li>
    <li><b>11 h 00 :</b> Tour des locaux & stand‑up Scrum (Lab créatif, cuisine‑test, studio podcast)</li>
    <li><b>13 h 30 :</b> Activation des accès + démo app NourrIR</li>
    <li><b>15 h 00 :</b> Atelier « Collage Dopamine »</li>
    <li><b>16 h 00 :</b> Entretien flash 1‑to‑1 (clarification attentes, Q/R)</li>
</ul>

<h2>3. Suivi structuré (0–12 mois)</h2>
<ul>
    <li><b>Semaine 1 :</b> Buddy Check‑in (questions, charge émotionnelle, Mood Tracker IA)</li>
    <li><b>Semaine 2 :</b> Formation RGPD & Sécurité (quiz + micro‑learning)</li>
    <li><b>Mois 1 :</b> Entretien 30/60/90 (model SHRM, feedback, ajustement OKR)</li>
    <li><b>Mois 3 :</b> <strong>Bilan créatif « Dopamine Dash »</strong> (présentation projet personnel, évaluation probation)</li>
    <li><b>Mois 6 :</b> Entretien intermédiaire & Plan carrière</li>
    <li><b>Mois 9 :</b> Sondage eNPS ciblé (engagement, idées d’amélioration)</li>
    <li><b>Année 1 :</b> <strong>Évaluation annuelle + Fête Anniv</strong> (performance, révision salaire, stratégie rétention)</li>
</ul>

<h2>4. Rôles & Responsabilités</h2>
<ul>
    <li><strong>Talent & Culture</strong> : pilote le programme, collecte KPI, anime la culture.</li>
    <li><strong>Gestionnaire</strong> : fixe objectifs, assure coaching, valide progression.</li>
    <li><strong>Buddy</strong> : soutien quotidien, intégration sociale, partage pratiques internes.</li>
    <li><strong>IT Support</strong> : provisioning matériel, sécurité informations.</li>
    <li><strong>Nouvel employé</strong> : acteur de son parcours, complète modules, sollicite feedback.</li>
</ul>

<h2>5. Évaluation et amélioration continue</h2>
<ul>
    <li><strong>Taux de rétention à 12 mois</strong> (≥ 90 %)</li>
    <li><strong>Time‑to‑Productivity (TTP)</strong> (≤ 8 semaines)</li>
    <li><strong>eNPS « Nouveaux »</strong> (≥ 50)</li>
    <li><strong>Taux de complétion modules IA</strong> (100 %)</li>
    <li><strong>Feedback qualitatif</strong> (rapport d’étonnement & entretiens 3 mois)</li>
</ul>
<p>
Les données sont analysées <strong>trimestriellement</strong> par RH ; des ajustements sont apportés suivant la méthode PDCA (<a href="https://fr.wikipedia.org/wiki/Roue_de_Deming" target="_blank">Plan‑Do‑Check‑Act</a>).
</p>

<h2>6. Annexes</h2>
<ol>
    <li>Checklists détaillées (voir SharePoint &gt; Onboarding &gt; Checklists).</li>
    <li>Livret d’accueil « On croque la dopamine » (PDF interactif).</li>
    <li>Listes d’outils IA utilisés et bonnes pratiques d’éthique.</li>
    <li>Références externes : 
      <a href="https://www.shrm.org/resourcesandtools/hr-topics/talent-acquisition/pages/onboarding-employee.aspx" target="_blank">SHRM Onboarding Toolkit (2024)</a>, 
      <a href="https://www.cipd.org/en/knowledge/factsheets/induction-factsheet/" target="_blank">CIPD Induction Factsheet (2023)</a>, 
      <a href="https://hbr.org/2024/01/onboarding-new-employees" target="_blank">HBR « Onboarding New Employees » (2024)</a>,
      <a href="https://www.cambridge.org/core/journals/nutritional-neuroscience/article/nutritional-psychiatry-review/2572E4E84E4BC21777C3B1E7DEEEB28B" target="_blank">Jacka F. et al., <em>Nutritional Psychiatry Review</em> (2023)</a>, 
      <a href="https://www.iso.org/fr/standard/62085.html" target="_blank">ISO 9001 §7.2 habilitations</a>.
    </li>
</ol>

<h2>7. Historique des versions</h2>
<table border="1" cellpadding="6" style="border-collapse:collapse;background:#fafafd;">
<tr>
    <th>Version</th>
    <th>Date</th>
    <th>Modifications</th>
    <th>Auteur</th>
</tr>
<tr>
    <td>1.0</td>
    <td>17 mai 2025</td>
    <td>Création initiale</td>
    <td>Talent & Culture / ChatGPT</td>
</tr>
</table>

<div style="margin-top:2em;font-size:0.98em;color:#555;">
<b>IA utilisées pour la rédaction de ce document :</b>
<ul>
<li><em><a href="https://chat.openai.com/" target="_blank">ChatGPT</a></em> (OpenAI) : structuration et rédaction initiale.</li>
<li><em><a href="https://copilot.microsoft.com/" target="_blank">Microsoft Copilot</a></em> : génération de checklists et tableaux.</li>
<li><em><a href="https://gemini.google.com/" target="_blank">Gemini</a></em> (Google) : suggestion d’activités créatives jour 1.</li>
<li><em><a href="https://www.midjourney.com/" target="_blank">Midjourney</a></em> : visuels d’illustration welcome kit.</li>
</ul>
Les contenus générés ont été relus et validés par l’équipe RH afin de garantir la conformité légale et l’adéquation culturelle.
</div>

<!-- HTML for the "Ask NurrIA" popup -->
<div id="ask-nuria-popup" style="display: none; position: absolute; background-color: var(--dopamine-purple); color: white; padding: 8px 12px; border-radius: 20px; cursor: pointer; z-index: 1050; box-shadow: 0 2px 10px rgba(0,0,0,0.2); font-size: 0.9em; transition: opacity 0.2s, transform 0.2s;">
    Demander à NurrIA 💡
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const askNuriaPopup = document.getElementById('ask-nuria-popup');
    const policyContentArea = document.querySelector('main'); // Target the main content area
    let currentSelectedText = '';
    let popupIsVisible = false;

    if (!askNuriaPopup || !policyContentArea) {
        console.warn('Ask NurrIA feature: Required elements (popup or content area) not found.');
        return;
    }

    function showAskPopup(x, y) {
        // Adjust x to ensure popup doesn't go off-screen right, with a small buffer
        const maxX = window.innerWidth - askNuriaPopup.offsetWidth - 15;
        const finalX = Math.min(x, maxX);
        
        askNuriaPopup.style.left = finalX + 'px';
        askNuriaPopup.style.top = y + 'px';
        askNuriaPopup.style.display = 'block';
        askNuriaPopup.style.opacity = '1'; // For fade-in effect
        askNuriaPopup.style.transform = 'translateY(0)';
        popupIsVisible = true;
    }

    function hideAskPopup() {
        askNuriaPopup.style.opacity = '0';
        askNuriaPopup.style.transform = 'translateY(-5px)'; // Slight move up on hide
        setTimeout(() => {
            if (askNuriaPopup.style.opacity === '0') {
                askNuriaPopup.style.display = 'none';
            }
        }, 200); // Corresponds to transition duration
        popupIsVisible = false;
    }

    policyContentArea.addEventListener('mouseup', (event) => {
        // Do not proceed if the event target is the popup itself or inside it
        if (askNuriaPopup.contains(event.target)) {
            return;
        }

        const selection = window.getSelection();
        const selectedText = selection.toString().trim();

        if (selectedText.length > 0) {
            currentSelectedText = selectedText;
            const range = selection.getRangeAt(0);
            const rect = range.getBoundingClientRect();
            
            let popupX = event.pageX + 5; 
            let popupY = event.pageY - askNuriaPopup.offsetHeight - 10; // Position above cursor

            // Boundary check: if popup would be above viewport, position below selection's bottom
            if ((window.scrollY + rect.top - askNuriaPopup.offsetHeight - 10) < window.scrollY) {
                 popupY = window.scrollY + rect.bottom + 10;
            }
            // Boundary check: if popup would be too far left (e.g., selection ends near left edge)
            if (event.clientX < (askNuriaPopup.offsetWidth / 2) + 10) { // 10px buffer
                popupX = event.pageX + 5; // Keep it to the right of cursor
            } 
            // Boundary check: if popup would be too far right
            else if (window.innerWidth - event.clientX < (askNuriaPopup.offsetWidth / 2) + 10) {
                popupX = event.pageX - askNuriaPopup.offsetWidth - 5; // To the left of cursor
            }


            showAskPopup(popupX, popupY);
        } else {
            // If no text is selected (e.g., just a click on policy content) and popup is visible, hide it.
            if (popupIsVisible && !askNuriaPopup.contains(event.target)) {
                 hideAskPopup();
            }
        }
    });

    askNuriaPopup.addEventListener('click', (event) => {
        event.stopPropagation(); // Prevent mousedown on document from hiding popup immediately

        if (currentSelectedText) {
            const chatBox = document.getElementById('nuria-chatbot-box'); 
            const chatToggle = document.getElementById('nuria-chatbot-toggle'); 
            const chatInput = document.getElementById('nuria-chat-input'); 

            if (chatBox && chatInput) { // chatToggle might be null if already hidden
                chatBox.style.display = 'flex';
                if (chatToggle) chatToggle.style.display = 'none'; // Hide toggle if visible
                
                chatInput.value = \`Peux-tu m'en dire plus sur : "${currentSelectedText}" ?\`;
                chatInput.focus(); 
            } else {
                console.warn('NurrIA chatbot elements not found in base.html for popup interaction.');
            }
        }
        hideAskPopup();
        currentSelectedText = ''; // Clear text after use
        // Clear browser selection
        if (window.getSelection) {
            if (window.getSelection().empty) { window.getSelection().empty(); } 
            else if (window.getSelection().removeAllRanges) { window.getSelection().removeAllRanges(); }
        } else if (document.selection) { document.selection.empty(); }
    });

    // General click listener to hide popup if clicking outside
    document.addEventListener('mousedown', (event) => {
        if (popupIsVisible && !askNuriaPopup.contains(event.target)) {
            // If a new selection is being made, mouseup on policyContent will handle it.
            // This primarily handles clicks completely outside the policy content or popup.
            const selection = window.getSelection();
            if (!selection || selection.toString().trim() === '') { // Only hide if no new selection is being made
                 hideAskPopup();
            }
        }
    });
});
    </script>

    <div class="presentation-container" style="text-align: center; margin: 2em 0;">
        <h2>Présentation interactive (Canva)</h2>
        <iframe src="https://www.canva.com/design/DAGn7T8JUpQ/view?embed" style="width:100%; height:600px; border:0;" allowfullscreen="allowfullscreen" loading="lazy"></iframe>
    </div>

{% endblock %}
